import{r as o}from"./index-CD8peejM.js";const i="/api/orders",f={"Content-Type":"application/json"},b=async()=>{const s=await fetch(i);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()},j=async s=>{const t=await fetch(`${i}/${s}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()},N=async s=>{const t=await fetch(i,{method:"POST",headers:f,body:JSON.stringify(s)});if(!t.ok)throw new Error(`Failed to create order (Status: ${t.status})`);return await t.json()},P=async(s,t)=>{const l=await fetch(`${i}/${s}/status`,{method:"PUT",headers:f,body:JSON.stringify(t)});if(!l.ok)throw new Error(`Failed to update order status (Status: ${l.status})`);return await l.json()},I=async s=>{const t=await fetch(`${i}/${s}`,{method:"DELETE",headers:f});if(!t.ok)throw new Error(`Failed to cancel order (Status: ${t.status})`);return!0},d={fetchOrders:b,fetchOrderById:j,createOrder:N,updateOrderStatus:P,cancelOrder:I};function F(){const[s,t]=o.useState([]),[l,O]=o.useState(null),[w,n]=o.useState(!1),[p,c]=o.useState(null),[$,y]=o.useState({open:!1,message:"",severity:"success"}),u=(e,r="success")=>{y({open:!0,message:e,severity:r})},g=()=>{y(e=>({...e,open:!1}))},E=o.useCallback(async()=>{n(!0),c(null);try{const e=await d.fetchOrders();return t(e),e}catch(e){return c(e),u(`Error fetching orders: ${e.message}`,"error"),[]}finally{n(!1)}},[]),S=o.useCallback(async e=>{n(!0),c(null);try{const r=await d.fetchOrderById(e);return O(r),r}catch(r){return c(r),u(`Error fetching order: ${r.message}`,"error"),null}finally{n(!1)}},[]),m=o.useCallback(async e=>{n(!0),c(null);try{const r=await d.createOrder(e);return t(a=>[...a,r]),u("Order placed successfully!","success"),r}catch(r){return c(r),u(`Error creating order: ${r.message}`,"error"),null}finally{n(!1)}},[]),k=o.useCallback(async(e,r)=>{n(!0),c(null);try{const a=await d.updateOrderStatus(e,r);return t(T=>T.map(h=>h.id===a.id?a:h)),u("Order status updated successfully","success"),a}catch(a){return c(a),u(`Error updating order status: ${a.message}`,"error"),null}finally{n(!1)}},[]),C=o.useCallback(async e=>{n(!0),c(null);try{return await d.cancelOrder(e),t(r=>r.map(a=>a.id===e?{...a,status:"Cancelled"}:a)),u("Order cancelled successfully","success"),!0}catch(r){return c(r),u(`Error cancelling order: ${r.message}`,"error"),!1}finally{n(!1)}},[]);return{orders:s,currentOrder:l,loading:w,error:p,notification:$,fetchOrders:E,fetchOrderById:S,createOrder:m,updateOrderStatus:k,cancelOrder:C,closeNotification:g}}export{F as u};
