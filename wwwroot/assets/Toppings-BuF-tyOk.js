import{i as Y,j as e,r as t,B as P,q as Z,I as q,l as se,o as Me,d as we,v as ne,h as W,T as X,E as De,M as ve,G as Te,L as Ee,H as ze,F as ae,w as re,A as Ae,f as Ie,J as Le}from"./index-CD8peejM.js";import{e as Pe,E as Be,d as he,A as xe,D as le,a as ie,b as ce,f as Oe,c as de}from"./Edit-BRpmiMRy.js";import{C as ue}from"./Chip-Bmu_tybA.js";import{D as Re}from"./DataGrid-BSJTCbXz.js";import{I as pe,T as ge}from"./TextField-Bo2pAtlc.js";import{S as fe,R as Fe}from"./Search-RSloyea3.js";import{P as Ne}from"./PageContainer-BfHEwUTD.js";import"./TableCell-Dkx7RtGj.js";import"./Link-86r20zSF.js";const $e=Y([e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),e.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")]),Ue=Y(e.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"})),He=Y(e.jsx("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"})),_e=Y([e.jsx("path",{d:"m12 12.9-2.13 2.09c-.56.56-.87 1.29-.87 2.07C9 18.68 10.35 20 12 20s3-1.32 3-2.94c0-.78-.31-1.52-.87-2.07z"},"0"),e.jsx("path",{d:"m16 6-.44.55C14.38 8.02 12 7.19 12 5.3V2S4 6 4 13c0 2.92 1.56 5.47 3.89 6.86-.56-.79-.89-1.76-.89-2.8 0-1.32.52-2.56 1.47-3.5L12 10.1l3.53 3.47c.95.93 1.47 2.17 1.47 3.5 0 1.02-.31 1.96-.85 2.75 1.89-1.15 3.29-3.06 3.71-5.3.66-3.55-1.07-6.9-3.86-8.52"},"1")]),Ge=Y(e.jsx("path",{d:"M3 18h6v-2H3zM3 6v2h18V6zm0 7h12v-2H3z"})),be="/api/pizzas",We=10,T={ALPHA_ASC:"alphaAsc",ALPHA_DESC:"alphaDesc",MOST_USED:"mostUsed",RECENT:"recent"},V={IDLE:"idle",LOADING:"loading",SUCCEEDED:"succeeded",FAILED:"failed"},ee=async()=>{const a=await fetch(be);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()},oe=async(a,l)=>{const i=await fetch(`${be}/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!i.ok)throw new Error(`Failed to update pizza ${a}`);return await i.json()},qe=async(a,l)=>{try{const u=(await ee()).filter(c=>{var m;return(m=c.toppings)==null?void 0:m.includes(a)});return await Promise.all(u.map(c=>{const m=c.toppings.map(C=>C===a?l:C);return oe(c.id,{...c,toppings:m})})),!0}catch(i){throw console.error("Error updating topping:",i),new Error(`Failed to update topping: ${i.message}`)}},Ve=async a=>{try{const i=(await ee()).filter(u=>{var c;return(c=u.toppings)==null?void 0:c.includes(a)});return await Promise.all(i.map(u=>{const c=u.toppings.filter(m=>m!==a);return oe(u.id,{...u,toppings:c})})),!0}catch(l){throw console.error("Error removing topping:",l),new Error(`Failed to remove topping: ${l.message}`)}},Je=async a=>{try{const l=await ee(),i=new Set(a),u=l.filter(c=>{var m;return(m=c.toppings)==null?void 0:m.some(C=>i.has(C))});return await Promise.all(u.map(c=>{const m=c.toppings.filter(C=>!i.has(C));return oe(c.id,{...c,toppings:m})})),!0}catch(l){throw console.error("Error removing multiple toppings:",l),new Error(`Failed to remove toppings: ${l.message}`)}},Q={fetchPizzas:ee,updateToppingInPizzas:qe,removeToppingFromPizzas:Ve,removeMultipleToppingsFromPizzas:Je};function Ke(a,l){return[...a].sort((i,u)=>{const c=l.includes(i.name),m=l.includes(u.name);return c&&!m?-1:!c&&m?1:c&&m?l.indexOf(i.name)-l.indexOf(u.name):i.name.localeCompare(u.name)})}function Ze(a){return[...a].sort((l,i)=>i.usage-l.usage||l.name.localeCompare(i.name))}function me(a,l=!0){return[...a].sort((i,u)=>{const c=i.name.localeCompare(u.name);return l?c:-c})}function Ye(a,l){if(!l)return a;const i=l.toLowerCase();return a.filter(u=>u.name.toLowerCase().includes(i))}function te(a,l){const i=a.toLowerCase().trim();return l.some(u=>u.toLowerCase().trim()===i)}function Qe(){const[a,l]=t.useState([]),[i,u]=t.useState([]),[c,m]=t.useState({status:V.IDLE,error:null}),[C,f]=t.useState(!1),[b,R]=t.useState(""),[E,F]=t.useState(T.ALPHA_ASC),[x,S]=t.useState([]),[y,z]=t.useState({}),[O,A]=t.useState({}),[_,J]=t.useState({open:!1,toppingName:null,isBulk:!1}),[N,I]=t.useState("asc"),[B,L]=t.useState("name"),$=t.useCallback(async()=>{m({status:V.LOADING,error:null}),S([]);try{const s=await Q.fetchPizzas(),o=d(s);l(o),m({status:V.SUCCEEDED,error:null})}catch(s){console.error("Error fetching toppings:",s),m({status:V.FAILED,error:s.message||"Failed to load toppings"})}},[]),d=t.useCallback(s=>{const o=s.flatMap(p=>p.toppings||[]).map(p=>p==null?void 0:p.trim()).filter(Boolean),r={},n=new Map;return o.forEach(p=>{const U=p.toLowerCase();r[U]=(r[U]||0)+1,n.has(U)||n.set(U,p)}),Array.from(n.values()).map(p=>({name:p,usage:r[p.toLowerCase()]||0}))},[]),g=t.useCallback(()=>{let s=[...a];switch(b&&(s=Ye(s,b)),E){case T.ALPHA_DESC:s=me(s,!1);break;case T.MOST_USED:s=Ze(s);break;case T.RECENT:s=Ke(s,i);break;default:s=me(s,!0)}return s},[a,b,E,i]),h=t.useCallback((s,o=0)=>{if(te(s,a.map(n=>n.name)))return!1;const r={name:s,usage:o};return l(n=>[...n,r]),u(n=>[s,...n].slice(0,We)),!0},[a]),k=t.useCallback(s=>{const o=a.find(U=>U.name===s);if(!o)return;const r=s;let n=1,p=`${r} (${n})`;for(;te(p,a.map(U=>U.name));)n++,p=`${r} (${n})`;h(p,o.usage)},[a,h]),D=t.useCallback((s,o)=>{z(r=>({...r,[s]:!0})),A(r=>({...r,[s]:{text:o,error:null}}))},[]),w=t.useCallback(s=>{z(o=>({...o,[s]:!1})),A(o=>{const r={...o};return delete r[s],r})},[]),v=t.useCallback(async(s,o)=>{const r=o==null?void 0:o.trim();if(!r)return A(n=>({...n,[s]:{...n[s],error:"Name cannot be empty"}})),!1;if(r===s)return w(s),!0;if(te(r,a.map(n=>n.name)))return A(n=>({...n,[s]:{...n[s],error:"Name already exists"}})),!1;f(!0);try{return await Q.updateToppingInPizzas(s,r),l(n=>n.map(p=>p.name===s?{...p,name:r}:p)),u(n=>n.map(p=>p===s?r:p)),S(n=>n.map(p=>p===s?r:p)),w(s),!0}catch(n){return A(p=>({...p,[s]:{...p[s],error:`Save failed: ${n.message}`}})),!1}finally{f(!1)}},[a,w]),j=t.useCallback(async s=>{if(!s.length)return!1;f(!0);try{s.length===1?await Q.removeToppingFromPizzas(s[0]):await Q.removeMultipleToppingsFromPizzas(s);const o=new Set(s);return l(r=>r.filter(n=>!o.has(n.name))),u(r=>r.filter(n=>!o.has(n))),S(r=>r.filter(n=>!o.has(n))),!0}catch(o){return m(r=>({...r,error:`Delete failed: ${o.message}`})),setTimeout(()=>m(r=>({...r,error:null})),5e3),!1}finally{f(!1)}},[]);t.useEffect(()=>{$()},[$]),t.useEffect(()=>{switch(E){case T.ALPHA_DESC:L("name"),I("desc");break;case T.MOST_USED:L("usage"),I("desc");break;case T.RECENT:L("name"),I("asc");break;default:L("name"),I("asc")}},[E]);const H=t.useCallback((s,o)=>{I(B===o&&N==="asc"?"desc":"asc"),L(o)},[N,B]),G=t.useCallback(s=>{if(s.target.checked){const o=g().map(r=>r.name);S(o);return}S([])},[g]),K=t.useCallback((s,o)=>{const r=x.indexOf(o);let n=[];r===-1?n=n.concat(x,o):r===0?n=n.concat(x.slice(1)):r===x.length-1?n=n.concat(x.slice(0,-1)):r>0&&(n=n.concat(x.slice(0,r),x.slice(r+1))),S(n)},[x]);return{toppings:g(),recentToppings:i,filterText:b,currentSortType:E,selected:x,editMode:y,editState:O,deleteDialog:_,fetchState:c,mutationLoading:C,order:N,orderBy:B,setFilterText:R,setCurrentSortType:F,setSelected:S,setDeleteDialog:J,setOrder:I,setOrderBy:L,handleAddTopping:h,handleStartEdit:D,handleSaveEdit:v,handleCancelEdit:w,handleDelete:j,handleDuplicateTopping:k,fetchToppings:$,handleRequestSort:H,handleRowClick:K,handleSelectAllClick:G}}const Xe=({toppingsData:a,order:l,orderBy:i,selected:u,onRowClick:c,onRequestSort:m,onEditStart:C,onEditSave:f,onEditCancel:b,onDeleteRequest:R,editMode:E,editState:F,loading:x,recentToppings:S})=>{const y=t.useCallback(d=>{R(d)},[R]),z=t.useCallback(d=>d.id,[]),O=t.useMemo(()=>a.map(d=>({id:d.name,name:d.name,usage:d.usage,isNew:S.includes(d.name),editState:F[d.name]||{text:"",error:null},isEditing:!!E[d.name]})),[a,S,E,F]),A=t.useMemo(()=>[{field:"name",headerName:"Topping Name",flex:1.5,minWidth:180,renderCell:d=>{const{isEditing:g,editState:h,name:k,isNew:D}=d.row,w=t.useMemo(()=>({display:"flex",alignItems:"center",minHeight:40}),[]);if(g){const v=t.useMemo(()=>({display:"flex",alignItems:"center",width:"100%"}),[]);return e.jsxs(P,{sx:v,children:[e.jsx("input",{style:{flex:1,fontSize:16,padding:4,borderRadius:4,border:"1px solid #ccc"},value:h.text,onChange:j=>C(k,j.target.value),onKeyDown:j=>{j.key==="Enter"&&f(k,h.text),j.key==="Escape"&&b(k)},disabled:x}),h.error&&e.jsx("span",{style:{color:"red",fontSize:12,marginLeft:8},children:h.error})]})}return e.jsxs(P,{sx:w,children:[k,D&&e.jsx(ue,{label:"New",size:"small",color:"info",sx:{fontSize:"0.65rem",height:18,ml:1}})]})},sortable:!0},{field:"usage",headerName:"Usage Count",align:"right",headerAlign:"right",flex:1,minWidth:120,renderCell:d=>e.jsx(ue,{label:d.value,size:"small",color:d.value>2?"primary":"default",variant:d.value>2?"filled":"outlined"}),sortable:!0},{field:"actions",headerName:"Actions",flex:1,minWidth:140,align:"right",headerAlign:"right",sortable:!1,disableReorder:!0,renderCell:d=>{var j;const{isEditing:g,name:h,editState:k}=d.row,D=t.useMemo(()=>({display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%",gap:1}),[]);if(g){const H=t.useCallback(()=>f(h,k.text),[f,h,k.text]),G=t.useCallback(()=>b(h),[b,h]);return e.jsxs(P,{sx:D,children:[e.jsx(Z,{title:"Save changes",children:e.jsx("span",{children:e.jsx(q,{color:"primary",size:"small",onClick:H,disabled:x||!((j=k.text)!=null&&j.trim()),children:e.jsx(Pe,{fontSize:"small"})})})}),e.jsx(Z,{title:"Cancel editing",children:e.jsx("span",{children:e.jsx(q,{size:"small",onClick:G,disabled:x,children:e.jsx(se,{fontSize:"small"})})})})]})}const w=t.useCallback(()=>C(h,h),[C,h]),v=t.useCallback(()=>y(h),[y,h]);return e.jsxs(P,{sx:D,children:[e.jsx(Z,{title:"Edit topping name",children:e.jsx("span",{children:e.jsx(q,{size:"small",color:"primary",onClick:w,disabled:x,children:e.jsx(Be,{fontSize:"small"})})})}),e.jsx(Z,{title:"Remove topping",children:e.jsx("span",{children:e.jsx(q,{size:"small",color:"error",onClick:v,disabled:x,children:e.jsx(he,{fontSize:"small"})})})})]})}}],[C,f,b,x,y,F]),_=t.useMemo(()=>({sorting:{sortModel:[{field:i,sort:l}]}}),[i,l]),J=t.useCallback(d=>{d[0]&&m(null,d[0].field)},[m]),N=t.useMemo(()=>[10,25,50],[]),I=t.useMemo(()=>u,[u]),B=t.useCallback(d=>{if(c)if(d.length>u.length){const g=d.find(h=>!u.includes(h));g&&c({target:{}},g)}else{const g=u.find(h=>!d.includes(h));g&&c({target:{}},g)}},[c,u]),L=t.useMemo(()=>({width:"100%",height:"100%"}),[]),$=t.useMemo(()=>({borderRadius:2,borderColor:"divider","& .MuiDataGrid-cell:focus":{outline:"none"},height:"100%","& .MuiDataGrid-virtualScroller::-webkit-scrollbar":{width:"8px"},"& .MuiDataGrid-virtualScroller::-webkit-scrollbar-track":{background:"transparent"},"& .MuiDataGrid-virtualScroller::-webkit-scrollbar-thumb":{backgroundColor:d=>d.palette.mode==="light"?"#BDBDBD":"#666666",borderRadius:"4px"},"& .MuiDataGrid-virtualScroller::-webkit-scrollbar-thumb:hover":{backgroundColor:d=>d.palette.mode==="light"?"#9E9E9E":"#888888"}}),[]);return e.jsx(P,{sx:L,children:e.jsx(Re,{rows:O,columns:A,checkboxSelection:!0,disableRowSelectionOnClick:!0,selectionModel:I,onRowSelectionModelChange:B,loading:x,disableColumnMenu:!0,pageSizeOptions:N,initialState:_,onSortModelChange:J,sx:$,getRowId:z})})},et=({numSelected:a,filterText:l,onFilterTextChange:i,onClearFilter:u,sortType:c,onSortChange:m,loading:C,onDeleteSelected:f,onAddTopping:b,onRefresh:R})=>{const E=we(),[F,x]=t.useState(null),S=t.useCallback(()=>{x(null)},[]),y=t.useCallback(o=>{m(o),S()},[m,S]),z=t.useCallback(()=>{u()},[u]),O=t.useCallback(()=>{f()},[f]),A=t.useCallback(o=>{i(o.target.value)},[i]),_=t.useCallback(o=>{x(o.currentTarget)},[]),J=t.useMemo(()=>[{type:T.ALPHA_ASC,label:"Alphabetical (A-Z)",icon:e.jsx(He,{})},{type:T.ALPHA_DESC,label:"Alphabetical (Z-A)",icon:e.jsx(Ue,{})},{type:T.MOST_USED,label:"Most Used",icon:e.jsx(_e,{})},{type:T.RECENT,label:"Recently Added",icon:e.jsx($e,{})}],[]),N=t.useMemo(()=>({mb:3,borderRadius:3,overflow:"hidden",backgroundColor:"background.paper",border:"1px solid",borderColor:"divider",boxShadow:1,position:"relative"}),[]),I=t.useMemo(()=>({p:{xs:2.5,sm:4},position:"relative",zIndex:2}),[]),B=t.useMemo(()=>({display:"flex",alignItems:"center",gap:2,ml:{xs:0,md:"auto"},flexWrap:{xs:"wrap",sm:"nowrap"},width:{xs:"100%",md:"auto"}}),[]),L=t.useMemo(()=>({display:"flex",alignItems:"center",gap:2,ml:{xs:0,md:"auto"},flexWrap:{xs:"wrap",sm:"nowrap"},width:{xs:"100%",md:"auto"}}),[]),$=t.useMemo(()=>({fontWeight:700,color:"text.primary",letterSpacing:"-0.01em",position:"relative",display:"inline-block",mb:.5,fontFamily:"Inter, Roboto, Arial",lineHeight:1.18}),[]),d=t.useMemo(()=>({color:"text.secondary",maxWidth:520,fontWeight:400,fontSize:{xs:"1.04rem",sm:"1.10rem"},mt:.5,fontFamily:"Inter, Roboto, Arial"}),[]),g=t.useMemo(()=>({color:"text.secondary"}),[]),h=t.useMemo(()=>({startAdornment:e.jsx(pe,{position:"start",children:e.jsx(fe,{sx:g})}),endAdornment:l&&e.jsx(pe,{position:"end",children:e.jsx(q,{size:"small",onClick:z,edge:"end","aria-label":"clear search",children:e.jsx(se,{fontSize:"small"})})})}),[l,z,g]),k=t.useMemo(()=>e.jsx(q,{onClick:R,"aria-label":"refresh list",sx:{backgroundColor:"action.selected",color:"primary.main","&:hover":{backgroundColor:ne(E.palette.primary.main,.15)},width:"40px",height:"40px"},children:e.jsx(Fe,{})}),[R,E]),D=t.useMemo(()=>e.jsx(W,{variant:"outlined",size:"medium",startIcon:e.jsx(Ge,{}),onClick:_,sx:{textTransform:"none",borderColor:"divider",color:"text.primary","&:hover":{backgroundColor:"action.hover",borderColor:"primary.main"}},children:"Sort"}),[_]),w=t.useMemo(()=>e.jsx(W,{variant:"contained",color:"primary",size:"medium",sx:{textTransform:"none",transition:"all 0.2s ease-in-out",color:"primary.contrastText"},onClick:b,startIcon:e.jsx(xe,{}),children:"Add"}),[b]),v=t.useMemo(()=>({"& .MuiInputBase-root":{backgroundColor:"background.default",color:"text.primary",height:"40px",minWidth:"200px"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"divider"},"& .MuiInputBase-root:hover .MuiOutlinedInput-notchedOutline":{borderColor:"action.active"},"& .MuiInputBase-root.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"primary.main"}}),[]),j=t.useMemo(()=>({"aria-labelledby":"sort-button"}),[]),H=t.useMemo(()=>({vertical:"bottom",horizontal:"right"}),[]),G=t.useMemo(()=>({vertical:"top",horizontal:"right"}),[]),K=t.useCallback(o=>()=>y(o),[y]),s=t.useMemo(()=>e.jsx(P,{sx:N,children:e.jsx(P,{sx:I,children:e.jsxs(P,{sx:B,children:[e.jsxs(P,{children:[e.jsx(X,{variant:"h4",component:"h2",sx:$,children:"Toppings Menu"}),e.jsx(X,{variant:"body1",sx:d,children:"Manage your toppings with ease. Add, edit, or remove items as needed."})]}),e.jsxs(P,{sx:L,children:[e.jsx(ge,{placeholder:"Search toppings...",size:"small",value:l,onChange:A,InputProps:h,sx:v}),w,D,e.jsx(Z,{title:"Refresh List",children:k})]})]})})}),[N,I,B,$,d,L,l,A,h,w,D,k,v]);return e.jsxs(e.Fragment,{children:[s,a>0&&e.jsxs(De,{sx:{pl:{sm:2},pr:{xs:1,sm:1},display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,bgcolor:o=>ne(o.palette.primary.main,o.palette.action.activatedOpacity),borderRadius:1},children:[e.jsxs(X,{sx:{flex:"1 1 auto"},color:"inherit",variant:"subtitle1",component:"div",children:[a," selected"]}),e.jsx(Z,{title:"Delete selected toppings",children:e.jsx(q,{onClick:O,color:"error",disabled:C,"aria-label":"delete selected toppings",children:e.jsx(he,{})})})]}),e.jsx(ve,{id:"sort-menu",anchorEl:F,open:!!F,onClose:S,MenuListProps:j,anchorOrigin:H,transformOrigin:G,children:J.map(({type:o,label:r,icon:n})=>e.jsxs(Te,{onClick:K(o),selected:c===o,dense:!0,children:[e.jsx(Ee,{children:n}),e.jsx(ze,{children:r})]},o))})]})},tt=Me.memo(et),st=()=>{const{toppings:a,recentToppings:l,filterText:i,currentSortType:u,selected:c,editMode:m,editState:C,deleteDialog:f,fetchState:b,mutationLoading:R,order:E,orderBy:F,setFilterText:x,setCurrentSortType:S,setDeleteDialog:y,setOrder:z,setOrderBy:O,handleAddTopping:A,handleStartEdit:_,handleSaveEdit:J,handleCancelEdit:N,handleDelete:I,fetchToppings:B,handleRequestSort:L,handleRowClick:$}=Qe(),d=t.useCallback(M=>{switch(S(M),M){case T.ALPHA_DESC:O("name"),z("desc");break;case T.MOST_USED:O("usage"),z("desc");break;case T.RECENT:O("name"),z("asc");break;default:O("name"),z("asc")}},[S,z,O]),g=t.useMemo(()=>a,[a]),[h,k]=t.useState(!1),[D,w]=t.useState(""),[v,j]=t.useState(""),H=b.status===V.LOADING||R,G=b.status===V.FAILED,K=b.error,s=t.useCallback(()=>{w(""),j(""),k(!0)},[]),o=t.useCallback(()=>{k(!1),w(""),j("")},[]),r=t.useCallback(M=>{w(M.target.value),v&&j("")},[v]),n=t.useCallback(()=>{const M=D.trim();if(!M){j("Topping name cannot be empty");return}if(a.some(ke=>ke.name.toLowerCase()===M.toLowerCase())){j("This topping already exists");return}A(M),o()},[D,a,A,o]),p=t.useCallback(()=>{x("")},[x]),U=t.useCallback(M=>{y({open:!0,toppingName:M,isBulk:!1})},[y]),Ce=t.useCallback(()=>{y({open:!0,toppingName:null,isBulk:!0})},[y]),Se=t.useMemo(()=>e.jsx(ae,{in:!0,timeout:500,children:e.jsx(P,{sx:{display:"flex",justifyContent:"center",p:3},children:e.jsx(re,{})})}),[]),je=t.useMemo(()=>e.jsx(ae,{in:!0,timeout:500,children:e.jsxs(Ae,{severity:"error",action:e.jsx(W,{color:"inherit",size:"small",onClick:B,children:"RETRY"}),sx:{mb:2},children:["Failed to load data: ",K||"An unknown error occurred."]})}),[B,K]),ye=t.useMemo(()=>e.jsxs(Ie,{elevation:0,variant:"outlined",sx:{borderRadius:2,p:3,textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",borderColor:"divider",bgcolor:"background.paper"},children:[e.jsx(fe,{color:"disabled",sx:{fontSize:40,mb:1}}),e.jsx(X,{variant:"body1",color:"text.secondary",children:i?"No toppings match search":"No toppings added yet"}),!i&&a.length===0&&e.jsx(W,{startIcon:e.jsx(xe,{}),color:"primary",variant:"text",size:"small",sx:{mt:1},onClick:s,children:"Add First Topping"})]}),[i,a.length,s]);return e.jsxs(P,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx(Le,{sx:{color:"common.white",zIndex:M=>M.zIndex.drawer+1},open:R,children:t.useMemo(()=>e.jsx(re,{color:"inherit"}),[])}),e.jsx(tt,{numSelected:c.length,filterText:i,onFilterTextChange:x,onClearFilter:p,sortType:u,onSortChange:d,loading:H,onDeleteSelected:Ce,onAddTopping:s,onRefresh:B}),e.jsxs(P,{sx:{flexGrow:1,overflow:"auto",position:"relative"},children:[b.status===V.LOADING&&g.length===0&&Se,G&&je,b.status!==V.LOADING&&!G&&(g.length===0?ye:e.jsx("div",{children:e.jsx(Xe,{toppingsData:g,order:E,orderBy:F,selected:c,onRowClick:$,onRequestSort:L,onEditStart:_,onEditSave:J,onEditCancel:N,onDeleteRequest:U,editMode:m,editState:C,loading:H,recentToppings:l})}))]}),e.jsxs(le,{open:f.open,onClose:()=>y({open:!1,toppingName:null,isBulk:!1}),"aria-labelledby":"delete-topping-dialog-title","aria-describedby":"delete-topping-dialog-description",children:[e.jsx(ie,{id:"delete-topping-dialog-title",children:f.isBulk?`Delete ${c.length} Toppings?`:"Delete Topping?"}),e.jsx(ce,{children:e.jsxs(Oe,{id:"delete-topping-dialog-description",children:[f.isBulk?`Are you sure you want to delete ${c.length} selected toppings? `:`Are you sure you want to delete "${f.toppingName}"? `,"This will remove the topping(s) from all pizzas that use it. This action cannot be undone."]})}),e.jsxs(de,{sx:{p:2},children:[e.jsx(W,{onClick:()=>y({open:!1,toppingName:null,isBulk:!1}),variant:"text",children:"Cancel"}),e.jsx(W,{onClick:()=>{const M=f.isBulk?c:[f.toppingName];I(M),y({open:!1,toppingName:null,isBulk:!1})},color:"error",variant:"contained",autoFocus:!0,disabled:H,children:"Delete"})]})]}),e.jsxs(le,{open:h,onClose:o,fullWidth:!0,maxWidth:"xs",children:[e.jsxs(ie,{children:["Add New Topping"," ",e.jsx(q,{"aria-label":"close",onClick:o,sx:{position:"absolute",right:8,top:8,color:"text.secondary"},children:e.jsx(se,{})})]}),e.jsx(ce,{children:e.jsx(ge,{autoFocus:!0,margin:"dense",label:"Topping Name",fullWidth:!0,variant:"outlined",value:D,onChange:r,error:!!v,helperText:v,placeholder:"Enter topping name",sx:{mt:1},onKeyPress:M=>{M.key==="Enter"&&n()}})}),e.jsxs(de,{sx:{px:3,pb:3},children:[e.jsx(W,{onClick:o,variant:"text",children:"Cancel"}),e.jsx(W,{onClick:n,variant:"contained",color:"primary",disabled:!D.trim()||!!v,children:"Add Topping"})]})]})]})},ot=t.memo(st),mt=()=>e.jsx(Ne,{children:e.jsx(ot,{})});export{mt as default};
